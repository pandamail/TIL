# 📅 2025년 10월 28일 - 일일 학습 기록

## 🚀 오늘 한 일
- [x] `user-exam.spec.ts` 사용자 시험 세부 기능 테스트 구현
  - [x] '글자 크기 변경' 기능 테스트 완료
  - [x] '1단/2단 보기' 전환 기능 테스트 완료
  - [x] '계산기' 및 '오답 표시' 기능 로케이터 오류 디버깅 및 수정
  - [x] '체크 문제' 토글 기능 테스트 구현 및 안정화
- [ ] '메모 기능' 테스트 구현 중 간헐적 타이밍 이슈 발생 (진행 중)

## 📚 새로 배운 것
### Playwright 타이밍 이슈와 디버깅
- **현상**: 특정 기능(메모) 테스트 시, `expect(locator).toBeVisible()` 검증 단계에서 간헐적으로 시간 초과 오류가 발생했다. 이는 테스트 실행 속도가 UI 렌더링/애니메이션 속도보다 빨라 발생하는 대표적인 타이밍 문제(Race Condition)이다.
- **해결 시도**: 단순히 `waitForTimeout`을 추가하는 것은 테스트의 안정성을 해치므로, Playwright의 자동 대기(Auto-waiting) 메커니즘을 최대한 활용하는 방향으로 고민했다. 로케이터의 범위를 더 명확히 하거나, 특정 상태 변경을 기다리는 다른 `expect` 구문을 추가하는 등의 접근법을 고려하고 있다.

## 💻 코드 스니펫
```typescript
// '체크 문제'의 토글 상태를 안정적으로 검증하는 코드
// 버튼 클릭 후, 답안 표기란의 특정 스타일에 변화가 생기는 것을 확인하여 동작을 검증했다.

// 1. 첫 번째 문제를 체크함
await userPage.getByTestId('question-check-button-1').click();

// 2. 답안 표기란의 첫 번째 문제에 '체크'되었음을 나타내는 클래스가 적용되었는지 확인
await expect(userPage.locator('.exam-check-item-wrap').nth(0)).toHaveClass(/exam-check-item-checked/);

// 3. 다시 클릭하여 체크를 해제함
await userPage.getByTestId('question-check-button-1').click();

// 4. '체크' 클래스가 제거되었는지 확인
await expect(userPage.locator('.exam-check-item-wrap').nth(0)).not.toHaveClass(/exam-check-item-checked/);
```

## 🤔 고민한 부분
- **메모 기능 테스트의 간헐적 실패**: 메모를 작성하고 저장한 뒤, 다시 열었을 때 `toBeVisible`이 실패하는 원인을 파악하는 데 시간이 걸렸다. UI 상으로는 분명히 보이는데 테스트는 실패하는 상황이라, 단순한 로케이터 문제라기보다는 상태 업데이트와 렌더링 사이의 미세한 시간 차이 때문일 가능성이 높다고 판단했다. 내일은 이 문제를 해결하기 위해 좀 더 안정적인 검증 방법을 찾아봐야겠다.

## 📌 내일 할 일
- [ ] '메모 기능' 테스트의 타이밍 이슈 해결 및 최종 완성
- [ ] '전체/체크/미응답 문제' 필터링 기능 테스트 구현

## 🔗 참고 링크
- [Playwright Auto-waiting](https://playwright.dev/docs/actionability)

---
**한 줄 회고**: 사용자 화면의 다양한 UI 기능들을 테스트하며, 간헐적으로 발생하는 타이밍 이슈 디버깅에 많은 시간을 쏟았지만 그만큼 안정적인 테스트 코드를 만드는 노하우를 얻을 수 있었다.

**태그**: #Playwright #E2E테스트 #디버깅 #타이밍이슈
