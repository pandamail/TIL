# 2025년 10월 21일 회고록

## 오늘 한 일
- Jenkins CI 환경에서 실패하던 Playwright 테스트(step4, step5)의 안정화 작업을 진행했다.
- 테스트 병렬 실행으로 인한 경쟁 상태(Race Condition)와 페이지네이션 문제를 해결했다.
- `global-setup`의 데이터베이스 초기화 스크립트 오류를 수정했다.
- Firefox 브라우저에서만 발생하던 특수한 `reload` 오류를 해결했다.

## 문제 및 해결 과정
### 1. CI 환경 테스트 실패 (경쟁 상태 및 페이지네이션)
- **문제**: 여러 테스트가 동시에 시험을 생성/삭제하며, 특정 테스트가 검증하려던 항목이 다른 페이지로 밀려나 찾지 못하는 타임아웃 오류가 발생했다.
- **시행착오**:
    1.  단순 타이밍 문제로 보고 `waitForTimeout`을 추가했으나 해결되지 않았다.
    2.  페이지를 넘기며 항목을 찾는 `ensureExamIsVisible` 헬퍼 함수를 도입했다. 가능성은 확인했지만 더 근본적인 해결책을 찾고자 했다.
    3.  `test.describe.serial`을 도입하여 순차 실행을 강제하고, `ensureExamIsVisible`는 불필요하다 판단하여 삭제했다. 하지만 이 역시 렌더링 지연 등 다른 변수에 취약했다.
- **최종 해결**: `test.describe.serial`로 테스트 간 경쟁 상태를 원천 차단하고, `ensureExamIsVisible` 헬퍼를 다시 도입하여 UI 렌더링 지연이나 예기치 못한 페이지네이션 문제까지 이중으로 방어하는 **하이브리드 전략**을 채택하여 안정성을 극대화했다.

### 2. Global Setup DB 오류
- **문제**: Jenkins 콘솔 로그 확인 결과, `global-setup.ts`가 DB 데이터를 생성하는 과정에서 `Duplicate entry`, `Unknown column` 오류를 발생시키고 있었다.
- **해결**: `TRUNCATE` 목록에 누락된 테이블을 추가하고, 최신 DB 스키마에 맞게 `INSERT` 구문을 수정하여 DB 초기화 문제를 해결했다.

## 배운 점 및 느낀 점
- 섣불리 코드를 제거하는 것의 위험성을 다시 한번 깨달았다. 불필요하다고 생각했던 `ensureExamIsVisible` 함수는 결국 안정성을 위한 핵심 열쇠였다.
- 테스트 자동화의 안정성은 하나의 완벽한 해결책이 아닌, 여러 전략의 조합으로 완성된다는 것을 배웠다. 순차 실행으로 경쟁 상태를 막고, 방어적 탐색 코드로 예외를 처리하는 하이브리드 방식의 유효성을 확인했다.
- CI/CD 파이프라인에서 발생하는 오류는 로컬과 원인이 다를 수 있음을 명심하고, 항상 콘솔 로그를 꼼꼼히 분석하는 습관이 중요하다.

## 내일 할 일
- Firefox 환경에서 아직 해결되지 않은 마지막 테스트 오류 1건을 해결한다.
