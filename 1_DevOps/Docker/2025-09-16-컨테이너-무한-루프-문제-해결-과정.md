# [Docker] 컨테이너 'Restarting' 무한 루프 문제 해결 과정

## 🤔 문제 상황 (Problem)
- `docker ps` 실행 시, 프론트엔드 컨테이너의 상태(STATUS)가 `Up`이 아닌 `Restarting`으로 표시되며 정상 실행되지 않았다.
- `docker logs` 명령어로는 컨테이너가 너무 빨리 종료되어 원인을 파악할 수 없었다.

## 💡 해결 과정 (Solution)
1.  **가설 설정:** 컨테이너 내부의 실행 스크립트에 문제가 있을 것으로 추정했다.
2.  **컨테이너 강제 생존:** `docker-compose.yml`의 `command`를 `["sleep", "3600"]`으로 변경하여, 컨테이너가 종료되지 않고 잠만 자도록 강제로 살려두었다.
3.  **내부 접속 및 조사:** `docker exec -it [컨테이너명] sh` 명령어로 컨테이너 내부에 접속했다.
4.  **원인 발견:** `ls -l /usr/bin/caddy`를 실행한 결과, 웹 서버를 실행해야 할 **`caddy` 실행 파일 자체가 이미지에 포함되지 않았음**을 발견했다. 이것이 'Restarting'의 근본 원인이었다.
5.  **아키텍처 변경:** 이후, 각 컨테이너가 웹 서버를 갖는 대신, 모든 요청을 처리하는 '마스터 Caddy'를 두는 리버스 프록시 구조로 변경하여 문제를 최종 해결했다.



## 📖 배운 점 (What I Learned)
- 컨테이너의 `Restarting` 상태는 내부 프로세스의 즉각적인 종료를 의미하며, 로그 확인이 어려울 땐 **`command`를 변경하여 강제로 살려두고 `docker exec`로 내부를 조사**하는 디버깅 기법이 매우 효과적이라는 것을 배웠다.
- Docker 이미지는 단순히 소스 코드뿐만 아니라, 그 코드를 실행하는 데 필요한 모든 환경(실행 파일, 라이브러리 등)을 포함해야 한다는 것을 명확히 이해했다.